{% extends "base.html" %}
{% load static %}
{% block content %}


<!-- SECTION BANNER -->
<div class="section-banner">
    <!-- SECTION BANNER ICON -->
    <img class="section-banner-icon" src="{% static 'img/banner/events-icon.png' %}" alt="accounthub-icon">
    <!-- /SECTION BANNER ICON -->

    <!-- SECTION BANNER TITLE -->
    <p class="section-banner-title">Account Hub</p>
    <!-- /SECTION BANNER TITLE -->

    <!-- SECTION BANNER TEXT -->
    <p class="section-banner-text">Profile info, messages, settings and much more!</p>
    <!-- /SECTION BANNER TEXT -->
</div>
<!-- /SECTION BANNER -->

<!-- GRID -->



<div class="grid grid-3-9 medium-space">
    <!-- GRID COLUMN -->
    <div class="account-hub-sidebar">
        <!-- SIDEBAR BOX -->
        <div class="sidebar-box no-padding">
            <!-- SIDEBAR MENU -->
            <div class="sidebar-menu">
                <!-- SIDEBAR MENU ITEM -->
                <div class="sidebar-menu-item">
                    <!-- SIDEBAR MENU HEADER -->
                    <div class="sidebar-menu-header accordion-trigger-linked">
                        <!-- SIDEBAR MENU HEADER ICON -->
                        <svg class="sidebar-menu-header-icon icon-profile">
                            <use xlink:href="#svg-profile"></use>
                        </svg>
                        <!-- /SIDEBAR MENU HEADER ICON -->

                        <!-- SIDEBAR MENU HEADER CONTROL ICON -->
                        <div class="sidebar-menu-header-control-icon">
                            <!-- SIDEBAR MENU HEADER CONTROL ICON OPEN -->
                            <svg class="sidebar-menu-header-control-icon-open icon-minus-small">
                                <use xlink:href="#svg-minus-small"></use>
                            </svg>
                            <!-- /SIDEBAR MENU HEADER CONTROL ICON OPEN -->

                            <!-- SIDEBAR MENU HEADER CONTROL ICON CLOSED -->
                            <svg class="sidebar-menu-header-control-icon-closed icon-plus-small">
                                <use xlink:href="#svg-plus-small"></use>
                            </svg>
                            <!-- /SIDEBAR MENU HEADER CONTROL ICON CLOSED -->
                        </div>
                        <!-- /SIDEBAR MENU HEADER CONTROL ICON -->

                        <!-- SIDEBAR MENU HEADER TITLE -->
                        <p class="sidebar-menu-header-title">Post</p>
                        <!-- /SIDEBAR MENU HEADER TITLE -->

                        <!-- SIDEBAR MENU HEADER TEXT -->
                        <p class="sidebar-menu-header-text">Create,View and Update Post!</p>
                        <!-- /SIDEBAR MENU HEADER TEXT -->
                    </div>
                    <!-- /SIDEBAR MENU HEADER -->

                    <!-- SIDEBAR MENU BODY -->
                    <div class="sidebar-menu-body accordion-content-linked accordion-open">
                        <!-- SIDEBAR MENU LINK -->
                        <a class="sidebar-menu-link" href="{% url 'create_post' %}">Create Post</a>
                        <!-- /SIDEBAR MENU LINK -->


                        <!-- SIDEBAR MENU LINK -->
                        <a class="sidebar-menu-link" href="{% url 'view_post' %}">View Your Post</a>
                        <!-- /SIDEBAR MENU LINK -->



                    </div>
                    <!-- /SIDEBAR MENU BODY -->
                </div>
                <!-- /SIDEBAR MENU ITEM -->


            </div>
            <!-- /SIDEBAR MENU -->

        </div>
        <!-- /SIDEBAR BOX -->
    </div>
    <!-- /GRID COLUMN -->
    {% if data %}
    <!-- GRID COLUMN -->
    <div class="account-hub-content">
        <!-- SECTION HEADER -->
        <div class="section-header">
            <!-- SECTION HEADER INFO -->
            <div class="section-header-info">

                <!-- SECTION TITLE -->
                <h2 class="section-title">Post</h2>
                <!-- /SECTION TITLE -->
            </div>
            <!-- /SECTION HEADER INFO -->
        </div>
        <!-- /SECTION HEADER -->

        <!-- GRID COLUMN -->
        <div class="grid-column">
            <!-- WIDGET BOX -->
            <div class="widget-box">
                {% if messages %}
                {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
                {% endfor %}
                {% endif %}
                <!-- WIDGET BOX TITLE -->
                <p class="widget-box-title">Edit Your Post</p>
                <!-- /WIDGET BOX TITLE -->

                <!-- WIDGET BOX CONTENT -->
                <div class="widget-box-content">
                    <!-- FORM -->
                    <form class="form" method="POST" id="profile-form" enctype="multipart/form-data">
                        {% csrf_token %}

                        <!-- FORM ITEM -->
                        <div class="form-item">
                            <!-- FORM INPUT -->
                            <div class="form-input small active">
                                <label for="profile-name">Post Title</label>
                                <input type="text" id="post-title" name="post_title" value="{{ postt.title }}">
                            </div>
                            <!-- /FORM INPUT -->
                        </div>
                        <!-- /FORM ITEM --><br>

                        <!-- FORM ITEM -->
                        <div class="form-item">
                            <!-- FORM INPUT -->
                            <div class="form-input small full">
                                <textarea id="post-description" name="post_description" placeholder="Write Something..."
                                    rows="10" cols="100">{{ postt.body_text }}</textarea>
                            </div>
                            <!-- /FORM INPUT -->
                        </div>
                        <!-- /FORM ITEM -->

                        <br>

<style>
    #imagePreview {
        width: 180px;
        height: 180px;
        background-position: center center;
        background-size: cover;
        -webkit-box-shadow: 0 0 1px 1px rgba(0, 0, 0, .3);
        display: inline-block;
        background-image: url('{{ postt.photo }}');
    }

    #uploadFile {
        display: none
    }
</style>

                        <div class="form-row split">
                            <!-- FORM ITEM -->
                            <div class="form-item">
                                <!-- FORM INPUT -->
                                <!-- <input type="file" name="files[]" id="files" hidden>
                                <label for="files"
                                    style="display: inline-block;background-color: indigo;color: white;padding: 0.5rem;font-family: sans-serif;border-radius: 0.3rem;cursor: pointer;margin-top: 1rem;">Choose
                                    image for the post </label> -->

                                    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
                                    <h3>Click on the image to edit</h3>
                                    <div id="imagePreview" src="{{ postt.photo }}" alt="placeholder image goes here"></div>
                                    <input id="uploadFile" type="file" name="image" class="img" />



                                <!-- /FORM INPUT -->
                            </div>
                            <!-- /FORM ITEM -->
                            <!-- FORM ITEM -->
                            <div class="form-item">
                                <!-- FORM INPUT -->

                               
                            </div>
                            
                        </div>

                        <div class="form-row">
                            <!-- FORM ITEM -->
                            <div class="form-item">
                                <!-- BUTTON -->
                                <button class="button medium secondary" style="width: 315px;">Click to Submit</button>
                                <!-- /BUTTON -->
                            </div>
                        </div>
                    </form>
                    <!-- /FORM -->
                </div>
                <!-- WIDGET BOX CONTENT -->
            </div>
            <!-- /WIDGET BOX -->

        </div>
        <!-- /GRID COLUMN -->
    </div>
    {% else %}
    <!-- WIDGET BOX -->
              <div class="widget-box">
                <!-- WIDGET BOX TITLE -->
                <p class="widget-box-title">Post</p>
                <!-- /WIDGET BOX TITLE -->

                <!-- WIDGET BOX CONTENT -->
                <div class="widget-box-content">
                  <!-- STATUS INFO -->
                  <div class="status-info success">
                    <!-- STATUS ICON WRAP -->
                    <div class="status-icon-wrap">
                      <!-- STATUS ICON -->
                        <!-- ICON CROSS -->
                        <svg class="status-icon icon-cross">
                          <use xlink:href="#svg-cross"></use>
                        </svg>
                        <!-- /ICON CROSS -->
                      <!-- /STATUS ICON -->
                    </div>
                    <!-- /STATUS ICON WRAP -->

                    <!-- STATUS TITLE -->
                    <p class="status-title">{{ request.user.email }}</p>
                    <!-- /STATUS TITLE -->

                    <!-- STATUS TEXT -->
                    <p class="status-text">{{ request.user.username }}</p>
                    <!-- /STATUS TEXT -->

                    <!-- STATUS DESCRIPTION -->
                    <h1 class="status-description" style="font-size: 30px;">You are trying to edit someone else post</h1>
                    <!-- /STATUS DESCRIPTION -->
                  </div>
                  <!-- /STATUS INFO -->
                </div>
                <!-- WIDGET BOX CONTENT -->
              </div>
              <!-- /WIDGET BOX -->
    {% endif %}
    <!-- /GRID COLUMN -->
</div>
<!-- /GRID -->

<script>
    $(function () {
        $("#uploadFile").on("change", function () {
            var files = !!this.files ? this.files : [];
            if (!files.length || !window.FileReader) return; // no file selected, or no FileReader support

            if (/^image/.test(files[0].type)) { // only image file
                var reader = new FileReader(); // instance of the FileReader
                reader.readAsDataURL(files[0]); // read the local file

                reader.onloadend = function () { // set image data as background of div
                    $("#imagePreview").css("background-image", "url(" + this.result + ")");
                }
            }
        });
    });

    $('#imagePreview').click(function () {
        $('#uploadFile').click();
    });
</script>

{% endblock content %}
